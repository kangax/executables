- name:       "redis"
  pid_file:   ":project_root/tmp/pids/redis.pid"
  start:      "redis-server :support_root/redis.conf > /dev/null 2>&1"
  stop:       "kill `cat :pid_file` > /dev/null 2>&1"

- start:      "sleep 5"
  stop:       "sleep 5"

- name:       "resque"
  pid_file:   ":project_root/tmp/pids/resque.pid"
  start:      "/bin/sh -c 'PIDFILE=:pid_file QUEUE=* VERBOSE=1 nohup rake environment resque:work& > :project_root/log/resque.log' > /dev/null 2>&1"
  stop:       "kill `cat :pid_file` && rm :pid_file > /dev/null 2>&1"

- name:       "juggernaut"
  pid_file:   ":project_root/tmp/juggernaut.pid"
  start:      "juggernaut -c :project_root/config/juggernaut.yml -d --pid :pid_file --log :project_root/log/juggernaut.log > /dev/null 2>&1"
  stop:       "juggernaut -c :project_root/config/juggernaut.yml -k * --pid :pid_file --log :project_root/log/juggernaut.log > /dev/null 2>&1"

- name:       "mongrel"
  pid_file:   ":project_root/tmp/pids/mongrel.pid"
  start:      "mongrel_rails start --daemonize -P :pid_file -l :project_root/log/mongrel.log > /dev/null 2>&1"
  stop:       "mongrel_rails stop -P :pid_file > /dev/null 2>&1 && rm -f :pid_file > /dev/null 2>&1"
  required:   true